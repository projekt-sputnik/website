---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug";





const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const last_posts = posts.slice(0, 3);

---

<BaseLayout sideBarActiveItemID="home">
  <div class="hero">
    <div class="heroContent">
      <h1 class="heroTitle">(Cyber)Space Agency</h1>
      <h2 class="heroSubtitle">Zero-Trust & Open-Source Built For Space</h2>
      <a href="/services" class="heroButton btn-outline">Security Dashboard</a>
      </div>
      </div>
      <div class="card w-100 bg-slate-900 shadow-xl">
    
    <!-- Code block starts -->
      <div class="text-center">
      <div class="text-4xl w-full font-bold mb-5 mt-10">Latest Posts</div>
      <div class="card-body">
      {
        last_posts.map((post) => (
          <>
            <HorizontalCard
              title={post.data.title}
              img={post.data.heroImage}
              desc={post.data.description}
              url={"/blog/" + createSlug(post.data.title, post.slug)}
              target="_self"
              badge={post.data.badge}
            />
             <div class="divider divider-info"></div>
          </>
        ))
      }
      
      </div>
      </div>
      
      
      </div>
</BaseLayout>
